# IELTS Writing Practice App - 詳細要件定義書

## 📋 要件概要

### プロジェクト目的
IELTS受験者がWriting Task（Task 1: 150語, Task 2: 250語）で高スコアを獲得するための、タイピング練習・暗記支援に特化したmacOSアプリケーション開発。

### 成功基準（MVP版）
1. **学習効果**: 基本的なタイピング練習環境の提供
2. **ユーザー満足度**: 実用的な練習機能の動作
3. **技術品質**: 安定した動作とデータ保存
4. **開発効率**: 3-4ヶ月での迅速なリリース

### MVP版の方針
- **シンプル第一**: 複雑な機能は後回しにして、コア機能に集中
- **段階的改善**: MVP版でフィードバック収集後、機能を段階的に追加
- **実用性重視**: 完璧な機能より、使える機能を優先

---

## 🎯 機能要件

### F001: IELTS模範解答管理システム
**優先度**: Critical

#### 機能詳細
- **模範解答データベース**: Task 1(150語) / Task 2(250語) 別管理
- **トピック分類**: Academic/General Training モジュール別
- **Band Score分類**: 6.0, 7.0, 8.0, 9.0 レベル別模範解答
- **構造化コンテンツ**: Introduction-Body-Conclusion構成の明示

#### 受け入れ基準
- [ ] Task 1模範解答 最低20問（各Band Score 5問以上）
- [ ] Task 2模範解答 最低20問（各Band Score 5問以上） 
- [ ] トピック検索・フィルタリング機能
- [ ] Band Score別自動推奨機能
- [ ] 模範解答の構造可視化（パラグラフ分け）

#### データ仕様
```swift
struct IELTSTask {
    let id: UUID
    let taskType: TaskType // .task1(150語), .task2(250語)
    let moduleType: ModuleType // .academic, .generalTraining
    let topic: String
    let prompt: String // 問題文
    let modelAnswer: String // 模範解答
    let targetBandScore: Double // 6.0-9.0
    let keyVocabulary: [String] // 重要語彙
    let keyPhrases: [String] // 重要フレーズ
    let wordCount: Int
    let structure: EssayStructure // パラグラフ構成
}
```

---

### F002: TTS音声システム（MVP版簡素化）
**優先度**: High（Phase 2）

#### MVP版機能詳細
- **全文再生のみ**: 模範解答の完全読み上げ（最重要機能）
- **基本速度調整**: 0.75x, 1.0x, 1.25x の3段階のみ
- **US English固定**: 音声言語は US English のみ

#### MVP版受け入れ基準
- [ ] AVFoundation統合、基本的な発音品質
- [ ] 全文再生機能動作
- [ ] 基本制御: 再生/停止/一時停止
- [ ] 速度調整: 3段階切り替え

#### 削除・後回し機能
- ~~文単位再生~~ → v2.0で追加予定
- ~~フレーズ再生~~ → v2.0で追加予定  
- ~~UK English~~ → v2.0で追加予定
- ~~詳細速度調整~~ → v2.0で追加予定
- ~~早送り/巻き戻し~~ → v2.0で追加予定

#### 簡素化技術仕様
```swift
class TTSManager: NSObject, AVSpeechSynthesizerDelegate {
    // MVP版: 基本制御のみ
    func playFullText(_ text: String)
    func pauseSpeech()
    func resumeSpeech()  
    func stopSpeech()
    func setSpeed(_ speed: TTSSpeed) // enum: slow, normal, fast
    
    // MVP版: 基本状態管理
    var isPlaying: Bool { get }
    var isPaused: Bool { get }
}
```

---

### F003: タイピング練習・測定システム（MVP版簡素化）
**優先度**: Critical

#### MVP版機能詳細
- **2分制限タイマー**: IELTS実試験対応の制限時間
- **基本WPM計算**: 平均速度の表示のみ
- **正確性測定**: 文字レベルでの基本正答率
- **完了率表示**: 入力進捗の基本表示

#### MVP版受け入れ基準
- [ ] タイマー機能動作（精度は実用レベル）
- [ ] WPM計算動作（基本的な精度）
- [ ] 正確性計算動作（基本的な精度）
- [ ] リアルタイム更新: 200ms間隔（100ms→200msに緩和）
- [ ] プログレスバー表示
- [ ] 一時停止/再開機能

#### 削除・後回し機能
- ~~品質指数~~ → v2.0で追加予定
- ~~瞬間WPM表示~~ → v2.0で追加予定
- ~~単語・文レベル分析~~ → v2.0で追加予定
- ~~高精度要件~~ → v2.0で改善予定

#### 簡素化計算アルゴリズム
```swift
// MVP版: シンプルなWPM計算
func calculateWPM() -> Double {
    let totalCharacters = Double(userInput.count)
    let wordsTyped = totalCharacters / 5.0
    let minutes = elapsedTime / 60.0
    return minutes > 0 ? wordsTyped / minutes : 0
}

// MVP版: 基本正確性計算
func calculateAccuracy() -> Double {
    let correctChars = countCorrectCharacters(userInput, target: targetText)
    let totalChars = userInput.count
    return totalChars > 0 ? (Double(correctChars) / Double(totalChars)) * 100 : 100
}

// 品質指数は削除
```

---

### F004: エラー分析システム（MVP版大幅簡素化）
**優先度**: Medium（Phase 2後半）

#### MVP版機能詳細
- **基本間違いカウント**: 単純な間違い文字数のカウント
- **基本差分検出**: 正解/不正解の判定のみ

#### MVP版受け入れ基準
- [ ] 入力文字と目標文字の基本比較
- [ ] 間違い文字数カウント機能
- [ ] 間違い率の基本計算

#### 削除・後回し機能（v2.0以降）
- ~~8種類詳細エラー分類~~ → v2.0で段階的追加
- ~~リアルタイム検出~~ → v2.0で追加  
- ~~分析ON/OFF設定~~ → v2.0で追加
- ~~修正提案~~ → v2.0で追加
- ~~学習リンク~~ → v3.0で追加
- ~~高精度要件~~ → v2.0で改善

#### 簡素化データ構造
```swift
// MVP版: 最小限のエラー情報
struct BasicErrorInfo {
    let totalErrors: Int
    let errorRate: Double
    let errorPositions: [Int] // 間違いの位置
}

// 詳細分類は削除、基本的な間違い検出のみ
```

---

### F005: 差分ハイライト表示システム（MVP版簡素化）
**優先度**: Medium（Phase 2）

#### MVP版機能詳細
- **基本色分け**: 正解（緑）・間違い（赤）・未入力（グレー）の3色のみ
- **基本差分表示**: 文字単位での簡単な比較表示

#### MVP版受け入れ基準
- [ ] 基本差分計算動作（遅延は実用レベル）
- [ ] 3色での基本色分け表示
- [ ] 文字単位での差分表示

#### 削除・後回し機能
- ~~8種類エラー別色分け~~ → v2.0で追加
- ~~リアルタイム高速処理~~ → v2.0で改善
- ~~自動スクロール~~ → v2.0で追加
- ~~アクセシビリティ対応~~ → v2.0で追加

#### 簡素化色分けスキーマ
```swift
// MVP版: 3色のみ
enum BasicHighlightColor {
    case correct    // #34C759 (緑): 正解部分
    case incorrect  // #FF3B30 (赤): 間違い部分
    case pending    // #8E8E93 (グレー): 未入力部分
}
```

---

### F006: 復習リストシステム（MVP版大幅簡素化）
**優先度**: Low（Phase 3で検討）

#### MVP版機能詳細
- **間違い箇所リスト**: 単純な間違い箇所の一覧表示のみ

#### MVP版受け入れ基準
- [ ] 間違い箇所の基本リスト表示

#### 削除・後回し機能（v2.0以降）
- ~~エラー種別分類~~ → v2.0で追加
- ~~TTS統合~~ → v2.0で追加
- ~~習得度4段階管理~~ → v2.0で追加
- ~~優先度算出~~ → v2.0で追加
- ~~自動習得マーク~~ → v2.0で追加

#### 注記
MVP版では復習機能は最小限とし、基本的なタイピング練習機能の完成を優先

---

### F007: 学習データ管理・出力システム（MVP版簡素化）
**優先度**: Low（Phase 3で検討）

#### MVP版機能詳細
- **基本データ保存**: 練習結果の基本保存のみ
- **簡単なCSV出力**: 基本的な学習履歴のCSV出力

#### MVP版受け入れ基準
- [ ] 練習結果の基本保存
- [ ] 簡単なCSV出力機能

#### 削除・後回し機能（v2.0以降）
- ~~詳細統計分析~~ → v2.0で追加
- ~~統計ダッシュボード~~ → v2.0で追加
- ~~進捗グラフ~~ → v2.0で追加
- ~~学習レポート自動生成~~ → v2.0で追加
- ~~JSONエクスポート~~ → v2.0で追加
- ~~学習目標設定~~ → v2.0で追加

#### 注記
MVP版では基本的なデータ保存と簡単な出力機能のみに限定

---

## 🔧 非機能要件（MVP版現実化）

### NFR001: パフォーマンス要件（MVP版）

#### 応答性能目標（計測重視）
- **入力遅延**: 実用的な応答性（数値は計測後改善）
- **TTS応答**: 実用的な応答時間（数値は計測後改善）
- **差分計算**: 実用的な処理速度（数値は計測後改善）
- **画面遷移**: スムーズな遷移（数値は計測後改善）

#### システム性能目標
- **起動時間**: 合理的な起動時間
- **メモリ使用量**: 適切なメモリ使用
- **CPU使用率**: 適切なCPU使用
- **ディスク容量**: 100MB程度

#### MVP版の方針
**計測システム実装 > 数値達成**: まず計測の仕組みを作り、実際の数値を把握してから改善目標を設定

### NFR002: 可用性要件（MVP版）

#### 基本安定性
- **クラッシュ対応**: 基本的な安定動作とクラッシュ時の適切なエラーハンドリング
- **データ保存**: 練習結果の確実な保存
- **復旧機能**: アプリの正常な再起動

#### 互換性
- **macOS**: 14.0+ (Sonoma以降)
- **アーキテクチャ**: Intel & Apple Silicon
- **解像度**: 1280x720以上の画面対応

### NFR003: セキュリティ要件

#### データ保護
- **ローカル処理**: 全データのローカル保存・処理
- **暗号化**: 学習データのCore Data暗号化
- **サンドボックス**: macOS App Sandbox準拠
- **プライバシー**: 個人情報の外部送信なし

---

## 🎨 ユーザビリティ要件

### UR001: 学習効率性
- **学習開始**: アプリ起動から練習開始まで3クリック以内
- **即時フィードバック**: 入力と同時のリアルタイム表示
- **直感的操作**: チュートリアルなしでの基本操作理解
- **集中維持**: 気を散らす要素の最小化

### UR002: アクセシビリティ
- **視覚**: 高コントラスト・カラーブラインド対応
- **聴覚**: TTS音声のクリア品質・速度調整
- **操作**: キーボードショートカット完全対応
- **認知**: シンプル・一貫したUI設計

---

## 📊 測定可能な目標（MVP版現実化）

### MVP版KPI (Key Performance Indicators)

#### 基本機能達成指標
- **機能完成度**: 基本タイピング練習機能の動作
- **データ保存**: 練習結果の確実な保存
- **基本操作**: 直感的な基本操作の実現

#### 技術品質指標（段階的改善）
- **安定性**: 基本的な動作安定性
- **データ完全性**: 学習データの確実な保存
- **ユーザビリティ**: 基本的な使いやすさの確保

#### ビジネス指標（長期目標）
- **ユーザーフィードバック**: 実際のユーザーからの改善点収集
- **機能要求**: v2.0への機能要求の把握
- **継続利用**: MVP版での基本的な継続利用

#### MVP版の測定方針
**定性評価重視**: 数値目標より実際の利用体験とフィードバックを重視し、v2.0での改善につなげる

---

## ✅ 受け入れテスト計画

### テストシナリオ

#### シナリオ1: 初回利用フロー
1. アプリ初回起動
2. チュートリアル完了
3. 初回練習実行
4. 結果確認・復習リスト生成
5. 設定変更・カスタマイズ

#### シナリオ2: 日常練習フロー  
1. アプリ起動（2回目以降）
2. 前回続きから練習開始
3. 2分タイピング練習完了
4. エラー分析・差分確認
5. 復習リスト更新・学習継続

#### シナリオ3: 長期利用フロー
1. 1ヶ月継続利用
2. 進捗データ確認
3. 学習データエクスポート
4. 設定調整・目標変更
5. 習得度評価・次段階移行

---

## 📋 MVP版要件トレーサビリティ

| 要件ID | 要件名 | MVP優先度 | 実装Phase | 簡素化レベル | 状態 |
|--------|--------|-----------|-----------|--------------|------|
| F001 | IELTS模範解答管理 | Critical | Phase1 | 維持 | MVP対応済 |
| F002 | TTS音声システム | High | Phase2 | 大幅簡素化 | MVP対応済 |
| F003 | タイピング練習・測定 | Critical | Phase1 | 簡素化 | MVP対応済 |
| F004 | エラー分析システム | Medium | Phase2後半 | 大幅簡素化 | MVP対応済 |
| F005 | 差分ハイライト表示 | Medium | Phase2 | 簡素化 | MVP対応済 |
| F006 | 復習リストシステム | Low | Phase3検討 | 大幅簡素化 | MVP対応済 |
| F007 | 学習データ管理 | Low | Phase3検討 | 簡素化 | MVP対応済 |

### 簡素化レベル説明
- **維持**: 元の仕様をほぼ維持
- **簡素化**: 一部機能を削除・後回し
- **大幅簡素化**: 基本機能のみに大幅削減

---

---

## 🎯 MVP版開発効果

### 工数削減効果
- **元の工数**: 920時間（20週間）
- **MVP版工数**: 約450時間（12週間）
- **削減効果**: 51%の工数削減、40%の期間短縮

### MVP版の利点
1. **迅速なリリース**: 3-4ヶ月での市場投入
2. **早期フィードバック**: ユーザーからの実際の要求把握
3. **リスク軽減**: 小さく始めて段階的に改善
4. **開発効率**: コア機能に集中した効率的な開発

### v2.0への移行計画
MVP版のユーザーフィードバックを基に、最も要求の高い機能から順次v2.0で実装

---

*このMVP版要件定義書は、IELTS Writing Practice Appの迅速な開発とリリースを実現し、ユーザーフィードバックに基づく段階的改善を可能にする実用的な開発指針です。*